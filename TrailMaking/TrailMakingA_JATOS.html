<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="jsPsych Trail Making Task: A">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="author" content="Jason Steffener, NCMLab">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trailmaking Task A</title>
    <script src="jspsych/dist/jspsych.js"></script>
    <script src="jspsych/dist/plugin-html-keyboard-response.js"></script>
    <script src="jspsych/dist/plugin-image-keyboard-response.js"></script>
    <script src="jspsych/dist/plugin-fullscreen.js"></script>
    <script src="jspsych/dist/plugin-instructions.js"></script>
    <script src="jspsych/dist/plugin-fullscreen.js"></script>
    <script src="TrailMaking_Setup_EN.js"></script>
    <script src="TrailMaking_Setup_A.js"></script>
    <script src="plugin-sketchpad-trailmaking.js"></script>
    <script src="jatos.js"></script>
    
    <link href="TrailMaking.css" rel="stylesheet">
    <style>
      .stimulus { font-size: StimulusFontSize; }
    </style>

  </head>
  <script>
  var jsPsych = initJsPsych({
      on_finish: () => {
        jsPsych.data.displayData();
      }
    });
  
  timeline = [];


  var enter_fullscreen = {
    type: jsPsychFullscreen,
    fullscreen_mode: true
  }

    var Wwidth = window.innerWidth 
  || document.documentElement.clientWidth
  || document.body.clientWidth; 
  

  var Wheight = window.innerHeight
  || document.documentElement.clientHeight
  || document.body.clientHeight;
  
  // I need to ensure that the width to height ratio is correct
  // The ratio for an 8.5 x 11 inch peice of paper is 0.77
  // Find teh best ratio based on the orientation 
  var baseRatio = 0.77
  
  if ( Wwidth/Wheight > 1) 
  {
    // landscape view
    Wwidth = Wheight * baseRatio
  }

  //timeline.push(enter_fullscreen)
  var trial = {
      type: jsPsychSketchpad,
      
      prompt_location: 'JASON',
      canvas_width: Wwidth,
      canvas_height: Wheight - 80,
      canvas_border_width: 1,
      stroke_width: pen_width,
      save_final_image: true,
      save_strokes: false,
      show_clear_button: false,
      show_undo_button: false,
      show_redo_button: false,
    }

  timeline.push(trial)
  jatos.onLoad(() => {
      jatos.addAbortButton();
      jsPsych.run(timeline);
    });


    //});
  </script>
</html>